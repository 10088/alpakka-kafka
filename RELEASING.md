# Releasing

1. Ask someone in the Akka team to rename the 'alpakka-kafka-xx-stable' report in [WhiteSource](https://saas.whitesourcesoftware.com) to reflect the latest version (unfortunately this requires permissions that cannot be shared in a granular way)
1. Check [closed issues without a milestone](https://github.com/akka/reactive-kafka/issues?utf8=%E2%9C%93&q=is%3Aissue%20is%3Aclosed%20no%3Amilestone) and either assign them the 'upcoming' release milestone or 'invalid'
1. Create a [new release](https://github.com/akka/reactive-kafka/releases/new) with:
    * the next tag version (e.g. `v0.21`)
    * title and release description including notable changes
    * link to the [milestone](https://github.com/akka/eactive-kafka/milestones) showing an overview of closed issues for this release
    * overview of contributors generated by [`sbt-authors`](https://github.com/2m/authors)
1. Travis CI will start a [CI build](https://travis-ci.org/akka/reactive-kafka/builds) for the new tag and publish artifacts to Bintray.
    * When the travis build fails it must be restarted. Artifacts may already have been pushed to Bintray, however, so remove them there before restarting the build.
1. Login to [Bintray](https://bintray.com/akka/maven/alpakka-kafka) and sync artifacts to Maven Central:
    * Go to the 'Maven Central' tab and use your sonatype credentials. This can take a long time (you can check https://oss.sonatype.org/#stagingRepositories for progress)
1. Close the milestone for this release and start a new one.

# Publishing docs

1. Checkout the newly released tag.
1. SCP docs to *gustav*:
    ```
    scp -r docs/target/paradox/site/main/* gustav.akka.io:www/docs/akka-stream-kafka/<new-version>/
    scp -r core/target/api/* gustav.akka.io:www/api/akka-stream-kafka/<new-version>/
    ```
1. Update the current links on *gustav*:
    ```
    ln -snf <new-version> current in www/api/akka-stream-kafka/ and www/docs/akka-stream-kafka
    ```

If you don't have access to *gustav* ask someone from the core akka team to do it or give you access.
